[Unit]
Description=Runners to orchestrate a high-availability PostgreSQL for {{ inventory_hostname }}
After=network.target
ConditionPathExists=/etc/patroni.yml

[Service]
Type=simple
User=postgres
Group=postgres
Environment="PATRONI_CONFIGURATION_FILE=/etc/patroni.yml"
ExecStart=/usr/bin/python3.9 /usr/bin/patroni /etc/patroni.yml
ExecReload=/bin/kill -s HUP $MAINPID
KillMode=process
TimeoutSec=30
Restart=no

[Install]
WantedBy=multi-user.target
